<!DOCTYPE html>
<html ng-app="cloudLogin">
<head>
<meta charset="UTF-8">
<title>Cloud File</title>

<link rel="stylesheet" href="libs/css/reset.css">
<link rel="stylesheet prefetch"	href="http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900|RobotoDraft:400,100,300,500,700,900">
<link rel="stylesheet prefetch"	href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
<link rel="stylesheet" href="libs/css/style.css">

<script src="libs/angular.js"></script>
<script src="libs/angular-md5.js"></script>
	<script>
		angular.module("cloudLogin", ["angular-md5"]);
		angular.module("cloudLogin").controller("cloudLoginController", function($scope, $http, md5) {
			
			$scope.pass;
			$scope.usr;
			var consultaWSLogin = function(){
				$http.get("http://localhost:8080/Cloud/service/auth/5").success(function(data,status){
					$scope.logado = data;
				})
			};
			consultaWSLogin();
			
			
		    $scope.fazerPost = function(usr,passEncr){
		    	console.log("entrei");
				$http.post("http://localhost:8080/Cloud/service/auth/post", JSON.stringify({"name":usr,"password":md5.createHash(passEncr)})).
			    success(function(data, status, headers, config) {
			        // this callback will be called asynchronously
			        // when the response is available
			        console.log(data);
			      }).
			      error(function(data, status, headers, config) {
			        // called asynchronously if an error occurs
			        // or server returns response with an error status.
			      });	
		    }
		});
		
	</script>
	
</head>

<body ng-controller="cloudLoginController">
	<!-- Form Mixin-->
	<!-- Input Mixin-->
	<!-- Button Mixin-->
	<!-- Pen Title-->
	<div class="pen-title">
		<h1>Cloud File</h1>
		<span>Seus dados <i class="fa fa-file-o"></i> + <i
			class="fa fa-cloud-upload"></i> na Nuvem!
		</span>
	</div>
	<!-- Form Module-->
	<div class="module form-module">
		<div class="toggle">
			<i class="fa fa-times fa-pencil"></i>
			<div class="tooltip">Registre-se!</div>
		</div>
		<div class="form">
			<h2>Acesse seus dados</h2>
			<form>
				<input type="text" ng-model="usr" placeholder="Usuário" /> <input type="password"
					ng-model="pass" placeholder="Senha" />
				<button ng-click="fazerPost(usr,pass)">Acessar</button>
			</form>
		</div>
		
		<div class="form">
			<h2>Crie sua conta</h2>
			<form>
				<input type="text" placeholder="Usuário" /> <input type="password"
					placeholder="Senha" /> <input type="email" placeholder="Email" />
				<button>Salvar</button>
			</form>
		</div>
		<div class="cta">
			<a href="">Esqueceu sua senha?</a>
		</div>
		{{logado}}
		
	</div>
	<script	src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<script src="libs/js/index.js"></script>

</body>
</html>
